import pandas as pdimport plotly.express as px#load datafile_path = '/Users/ruitongliu/Desktop/Data_literacy_project/DataLiteracy/archive/final_filtered_userdata_with_iso3_codes.xlsx'  # 替换为实际文件路径data = pd.read_excel(file_path)#  based on county and gender, cacultate the different ypesgender_counts = data.groupby(['Iso3_code', 'Gender']).size().unstack(fill_value=0)# caculate the males per 100 femalesgender_counts['Males per 100 Females'] = (gender_counts['Male'] / gender_counts['Female']) * 100# 为绘图准备数据plot_data = gender_counts.reset_index()[['Iso3_code', 'Males per 100 Females']]plot_data.columns = ['iso_alpha', 'Males per 100 Females']# 创建世界地图fig = px.choropleth(plot_data,                     locations="iso_alpha",                    color="Males per 100 Females",                    hover_name="iso_alpha",                    color_continuous_scale=px.colors.sequential.Plasma,                    title="World Map of Gender Ratio (Males per 100 Females)")# 显示地图fig.show(renderer='browser')