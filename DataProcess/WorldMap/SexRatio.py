#!/usr/bin/env python3# -*- coding: utf-8 -*-"""Created on Mon Jan 15 14:01:52 2024@author: ruitongliu"""import pandas as pdimport plotly.express as px#load datafile_path = '/Users/ruitongliu/Desktop/Data_literacy_project/DataLiteracy/archive/iso3_output.csv'  # 替换为实际文件路径data = pd.read_csv(file_path)# Filter out Antarctica based on its ISO alpha-3 code ('ATA')data = data[data['ISO3_Code'] != 'ATA']# Calculate gender counts based on country and gendergender_counts = data.groupby(['ISO3_Code', 'Gender']).size().unstack(fill_value=0)# Filter out countries with a total count less than 10gender_counts = gender_counts[(gender_counts.sum(axis=1) >= 10)]# Calculate the males per 100 femalesgender_counts['Males per 100 Females'] = (gender_counts['Male'] / gender_counts['Female']) * 100# Prepare data for plottingplot_data = gender_counts.reset_index()[['ISO3_Code', 'Males per 100 Females']]plot_data.columns = ['iso_alpha', 'Males per 100 Females']# Create world mapfig = px.choropleth(plot_data,                     locations="iso_alpha",                    color="Males per 100 Females",                    hover_name="iso_alpha",                    color_continuous_scale="Viridis",  # Changed to 'Viridis'                    title="World Map of Gender Ratio (Males per 100 Females)",                    projection="natural earth")# Set country boundaries to blackfig.update_geos(showcountries=True, countrycolor="Black")# Show the mapfig.show(renderer='browser')